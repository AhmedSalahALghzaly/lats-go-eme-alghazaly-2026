{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":222},"end":{"line":7,"column":32,"index":254}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":255},"end":{"line":8,"column":49,"index":304}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"../../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":305},"end":{"line":9,"column":52,"index":357}}],"key":"nyyYhUSrs1E/gmhOvO2pRmnZGkM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"bundleKeys\", {\n    enumerable: true,\n    get: function () {\n      return bundleKeys;\n    }\n  });\n  exports.useBundleOffersQuery = useBundleOffersQuery;\n  exports.useBundleProducts = useBundleProducts;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _servicesApi = require(_dependencyMap[2], \"../../services/api\");\n  /**\n   * useBundleProducts - Hook to track products included in active bundles\n   * Uses React Query to fetch bundle offers and create a Set for O(1) lookup\n   * \n   * Used globally to show golden gift icon on bundle products\n   */\n\n  // Query key for bundle offers\n  const bundleKeys = {\n    all: ['bundleOffers'],\n    active: ['bundleOffers', 'active']\n  };\n  /**\n   * Hook to fetch all active bundle offers\n   */\n  function useBundleOffersQuery(enabled = true) {\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: bundleKeys.active,\n      queryFn: async () => {\n        const response = await _servicesApi.bundleOfferApi.getAll(true); // active only\n        return response.data || [];\n      },\n      enabled,\n      staleTime: 5 * 60 * 1000 // 5 minutes - bundles don't change often\n    });\n  }\n\n  /**\n   * Hook to get Set of all product IDs that are part of any active bundle\n   * Returns O(1) lookup for checking if a product is in a bundle\n   */\n  function useBundleProducts() {\n    const {\n      data: bundleOffers = [],\n      isLoading,\n      isError\n    } = useBundleOffersQuery();\n\n    // Flatten all product_ids from all active bundles into a Set\n    const bundleProductIds = (0, _react.useMemo)(() => {\n      const productSet = new Set();\n      bundleOffers.forEach(bundle => {\n        if (bundle.is_active && Array.isArray(bundle.product_ids)) {\n          bundle.product_ids.forEach(productId => {\n            productSet.add(productId);\n          });\n        }\n      });\n      return productSet;\n    }, [bundleOffers]);\n\n    // Helper function to check if a product is in any bundle\n    const isProductInBundle = productId => {\n      return bundleProductIds.has(productId);\n    };\n\n    // Get bundle info for a specific product (if any)\n    const getBundleForProduct = productId => {\n      return bundleOffers.find(bundle => bundle.is_active && Array.isArray(bundle.product_ids) && bundle.product_ids.includes(productId));\n    };\n    return {\n      bundleProductIds,\n      bundleOffers,\n      isProductInBundle,\n      getBundleForProduct,\n      isLoading,\n      isError\n    };\n  }\n  var _default = useBundleProducts;\n});","lineCount":94,"map":[[7,2,87,0,"Object"],[7,8,87,0],[7,9,87,0,"defineProperty"],[7,23,87,0],[7,24,87,0,"exports"],[7,31,87,0],[8,4,87,0,"enumerable"],[8,14,87,0],[9,4,87,0,"get"],[9,7,87,0],[9,18,87,0,"get"],[9,19,87,0],[10,6,87,0],[10,13,87,0,"_default"],[10,21,87,0],[11,4,87,0],[12,2,87,0],[13,2,12,0,"Object"],[13,8,12,0],[13,9,12,0,"defineProperty"],[13,23,12,0],[13,24,12,0,"exports"],[13,31,12,0],[14,4,12,0,"enumerable"],[14,14,12,0],[15,4,12,0,"get"],[15,7,12,0],[15,18,12,0,"get"],[15,19,12,0],[16,6,12,0],[16,13,12,0,"bundleKeys"],[16,23,12,0],[17,4,12,0],[18,2,12,0],[19,2,29,0,"exports"],[19,9,29,0],[19,10,29,0,"useBundleOffersQuery"],[19,30,29,0],[19,33,29,0,"useBundleOffersQuery"],[19,53,29,0],[20,2,45,0,"exports"],[20,9,45,0],[20,10,45,0,"useBundleProducts"],[20,27,45,0],[20,30,45,0,"useBundleProducts"],[20,47,45,0],[21,2,7,0],[21,6,7,0,"_react"],[21,12,7,0],[21,15,7,0,"require"],[21,22,7,0],[21,23,7,0,"_dependencyMap"],[21,37,7,0],[22,2,8,0],[22,6,8,0,"_tanstackReactQuery"],[22,25,8,0],[22,28,8,0,"require"],[22,35,8,0],[22,36,8,0,"_dependencyMap"],[22,50,8,0],[23,2,9,0],[23,6,9,0,"_servicesApi"],[23,18,9,0],[23,21,9,0,"require"],[23,28,9,0],[23,29,9,0,"_dependencyMap"],[23,43,9,0],[24,2,1,0],[25,0,2,0],[26,0,3,0],[27,0,4,0],[28,0,5,0],[29,0,6,0],[31,2,11,0],[32,2,12,7],[32,8,12,13,"bundleKeys"],[32,18,12,23],[32,21,12,26],[33,4,13,2,"all"],[33,7,13,5],[33,9,13,7],[33,10,13,8],[33,24,13,22],[33,25,13,32],[34,4,14,2,"active"],[34,10,14,8],[34,12,14,10],[34,13,14,11],[34,27,14,25],[34,29,14,27],[34,37,14,35],[35,2,15,0],[35,3,15,1],[36,2,26,0],[37,0,27,0],[38,0,28,0],[39,2,29,7],[39,11,29,16,"useBundleOffersQuery"],[39,31,29,36,"useBundleOffersQuery"],[39,32,29,37,"enabled"],[39,39,29,44],[39,42,29,47],[39,46,29,51],[39,48,29,53],[40,4,30,2],[40,11,30,9],[40,15,30,9,"useQuery"],[40,34,30,17],[40,35,30,17,"useQuery"],[40,43,30,17],[40,45,30,18],[41,6,31,4,"queryKey"],[41,14,31,12],[41,16,31,14,"bundleKeys"],[41,26,31,24],[41,27,31,25,"active"],[41,33,31,31],[42,6,32,4,"queryFn"],[42,13,32,11],[42,15,32,13],[42,21,32,13,"queryFn"],[42,22,32,13],[42,27,32,25],[43,8,33,6],[43,14,33,12,"response"],[43,22,33,20],[43,25,33,23],[43,31,33,29,"bundleOfferApi"],[43,43,33,43],[43,44,33,43,"bundleOfferApi"],[43,58,33,43],[43,59,33,44,"getAll"],[43,65,33,50],[43,66,33,51],[43,70,33,55],[43,71,33,56],[43,72,33,57],[43,73,33,58],[44,8,34,6],[44,15,34,14,"response"],[44,23,34,22],[44,24,34,23,"data"],[44,28,34,27],[44,32,34,31],[44,34,34,33],[45,6,35,4],[45,7,35,5],[46,6,36,4,"enabled"],[46,13,36,11],[47,6,37,4,"staleTime"],[47,15,37,13],[47,17,37,15],[47,18,37,16],[47,21,37,19],[47,23,37,21],[47,26,37,24],[47,30,37,28],[47,31,37,30],[48,4,38,2],[48,5,38,3],[48,6,38,4],[49,2,39,0],[51,2,41,0],[52,0,42,0],[53,0,43,0],[54,0,44,0],[55,2,45,7],[55,11,45,16,"useBundleProducts"],[55,28,45,33,"useBundleProducts"],[55,29,45,33],[55,31,45,36],[56,4,46,2],[56,10,46,8],[57,6,46,10,"data"],[57,10,46,14],[57,12,46,16,"bundleOffers"],[57,24,46,28],[57,27,46,31],[57,29,46,33],[58,6,46,35,"isLoading"],[58,15,46,44],[59,6,46,46,"isError"],[60,4,46,54],[60,5,46,55],[60,8,46,58,"useBundleOffersQuery"],[60,28,46,78],[60,29,46,79],[60,30,46,80],[62,4,48,2],[63,4,49,2],[63,10,49,8,"bundleProductIds"],[63,26,49,24],[63,29,49,27],[63,33,49,27,"useMemo"],[63,39,49,34],[63,40,49,34,"useMemo"],[63,47,49,34],[63,49,49,35],[63,55,49,41],[64,6,50,4],[64,12,50,10,"productSet"],[64,22,50,20],[64,25,50,23],[64,29,50,27,"Set"],[64,32,50,30],[64,33,50,39],[64,34,50,40],[65,6,52,4,"bundleOffers"],[65,18,52,16],[65,19,52,17,"forEach"],[65,26,52,24],[65,27,52,26,"bundle"],[65,33,52,45],[65,37,52,50],[66,8,53,6],[66,12,53,10,"bundle"],[66,18,53,16],[66,19,53,17,"is_active"],[66,28,53,26],[66,32,53,30,"Array"],[66,37,53,35],[66,38,53,36,"isArray"],[66,45,53,43],[66,46,53,44,"bundle"],[66,52,53,50],[66,53,53,51,"product_ids"],[66,64,53,62],[66,65,53,63],[66,67,53,65],[67,10,54,8,"bundle"],[67,16,54,14],[67,17,54,15,"product_ids"],[67,28,54,26],[67,29,54,27,"forEach"],[67,36,54,34],[67,37,54,36,"productId"],[67,46,54,53],[67,50,54,58],[68,12,55,10,"productSet"],[68,22,55,20],[68,23,55,21,"add"],[68,26,55,24],[68,27,55,25,"productId"],[68,36,55,34],[68,37,55,35],[69,10,56,8],[69,11,56,9],[69,12,56,10],[70,8,57,6],[71,6,58,4],[71,7,58,5],[71,8,58,6],[72,6,60,4],[72,13,60,11,"productSet"],[72,23,60,21],[73,4,61,2],[73,5,61,3],[73,7,61,5],[73,8,61,6,"bundleOffers"],[73,20,61,18],[73,21,61,19],[73,22,61,20],[75,4,63,2],[76,4,64,2],[76,10,64,8,"isProductInBundle"],[76,27,64,25],[76,30,64,29,"productId"],[76,39,64,46],[76,43,64,60],[77,6,65,4],[77,13,65,11,"bundleProductIds"],[77,29,65,27],[77,30,65,28,"has"],[77,33,65,31],[77,34,65,32,"productId"],[77,43,65,41],[77,44,65,42],[78,4,66,2],[78,5,66,3],[80,4,68,2],[81,4,69,2],[81,10,69,8,"getBundleForProduct"],[81,29,69,27],[81,32,69,31,"productId"],[81,41,69,48],[81,45,69,78],[82,6,70,4],[82,13,70,11,"bundleOffers"],[82,25,70,23],[82,26,70,24,"find"],[82,30,70,28],[82,31,70,30,"bundle"],[82,37,70,49],[82,41,71,6,"bundle"],[82,47,71,12],[82,48,71,13,"is_active"],[82,57,71,22],[82,61,72,6,"Array"],[82,66,72,11],[82,67,72,12,"isArray"],[82,74,72,19],[82,75,72,20,"bundle"],[82,81,72,26],[82,82,72,27,"product_ids"],[82,93,72,38],[82,94,72,39],[82,98,73,6,"bundle"],[82,104,73,12],[82,105,73,13,"product_ids"],[82,116,73,24],[82,117,73,25,"includes"],[82,125,73,33],[82,126,73,34,"productId"],[82,135,73,43],[82,136,74,4],[82,137,74,5],[83,4,75,2],[83,5,75,3],[84,4,77,2],[84,11,77,9],[85,6,78,4,"bundleProductIds"],[85,22,78,20],[86,6,79,4,"bundleOffers"],[86,18,79,16],[87,6,80,4,"isProductInBundle"],[87,23,80,21],[88,6,81,4,"getBundleForProduct"],[88,25,81,23],[89,6,82,4,"isLoading"],[89,15,82,13],[90,6,83,4,"isError"],[91,4,84,2],[91,5,84,3],[92,2,85,0],[93,2,87,0],[93,6,87,0,"_default"],[93,14,87,0],[93,17,87,15,"useBundleProducts"],[93,34,87,32],[94,0,87,33],[94,3]],"functionMap":{"names":["<global>","useBundleOffersQuery","useQuery$argument_0.queryFn","useBundleProducts","useMemo$argument_0","bundleOffers.forEach$argument_0","bundle.product_ids.forEach$argument_0","isProductInBundle","getBundleForProduct","bundleOffers.find$argument_0"],"mappings":"AAA;OC4B;aCG;KDG;CDI;OGM;mCCI;yBCG;mCCE;SDE;KDE;GDG;4BIG;GJE;8BKG;6BCC;4CDG;GLE;CHU"},"hasCjsExports":false},"type":"js/module"}]}