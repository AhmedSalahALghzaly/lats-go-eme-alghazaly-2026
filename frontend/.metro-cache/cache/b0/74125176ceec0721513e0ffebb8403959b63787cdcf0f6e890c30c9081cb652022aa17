{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":222},"end":{"line":7,"column":32,"index":254}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":255},"end":{"line":8,"column":49,"index":304}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"../../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":305},"end":{"line":9,"column":52,"index":357}}],"key":"nyyYhUSrs1E/gmhOvO2pRmnZGkM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  /**\n   * useBundleProducts - Hook to track products included in active bundles\n   * Uses React Query to fetch bundle offers and create a Set for O(1) lookup\n   * \n   * Used globally to show golden gift icon on bundle products\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"bundleKeys\", {\n    enumerable: true,\n    get: function () {\n      return bundleKeys;\n    }\n  });\n  exports.useBundleOffersQuery = useBundleOffersQuery;\n  exports.useBundleProducts = useBundleProducts;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _servicesApi = require(_dependencyMap[2], \"../../services/api\");\n  // Query key for bundle offers\n  const bundleKeys = {\n    all: ['bundleOffers'],\n    active: ['bundleOffers', 'active']\n  };\n  /**\n   * Hook to fetch all active bundle offers\n   */\n  function useBundleOffersQuery(enabled = true) {\n    _s();\n    return (0, _tanstackReactQuery.useQuery)({\n      queryKey: bundleKeys.active,\n      queryFn: async () => {\n        const response = await _servicesApi.bundleOfferApi.getAll(true); // active only\n        return response.data || [];\n      },\n      enabled,\n      staleTime: 5 * 60 * 1000 // 5 minutes - bundles don't change often\n    });\n  }\n\n  /**\n   * Hook to get Set of all product IDs that are part of any active bundle\n   * Returns O(1) lookup for checking if a product is in a bundle\n   */\n  _s(useBundleOffersQuery, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n  function useBundleProducts() {\n    _s2();\n    const {\n      data: bundleOffers = [],\n      isLoading,\n      isError\n    } = useBundleOffersQuery();\n\n    // Flatten all product_ids from all active bundles into a Set\n    const bundleProductIds = (0, _react.useMemo)(() => {\n      const productSet = new Set();\n      bundleOffers.forEach(bundle => {\n        if (bundle.is_active && Array.isArray(bundle.product_ids)) {\n          bundle.product_ids.forEach(productId => {\n            productSet.add(productId);\n          });\n        }\n      });\n      return productSet;\n    }, [bundleOffers]);\n\n    // Helper function to check if a product is in any bundle\n    const isProductInBundle = productId => {\n      return bundleProductIds.has(productId);\n    };\n\n    // Get bundle info for a specific product (if any)\n    const getBundleForProduct = productId => {\n      return bundleOffers.find(bundle => bundle.is_active && Array.isArray(bundle.product_ids) && bundle.product_ids.includes(productId));\n    };\n    return {\n      bundleProductIds,\n      bundleOffers,\n      isProductInBundle,\n      getBundleForProduct,\n      isLoading,\n      isError\n    };\n  }\n  _s2(useBundleProducts, \"9B+wQqGTBzhZz0ufEhL7MNzAHeo=\", false, function () {\n    return [useBundleOffersQuery];\n  });\n  var _default = useBundleProducts;\n});","lineCount":103,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,0,4,0],[10,0,5,0],[11,0,6,0],[12,2,1,0,"Object"],[12,8,1,0],[12,9,1,0,"defineProperty"],[12,23,1,0],[12,24,1,0,"exports"],[12,31,1,0],[13,4,1,0,"value"],[13,9,1,0],[14,2,1,0],[15,2,87,0,"Object"],[15,8,87,0],[15,9,87,0,"defineProperty"],[15,23,87,0],[15,24,87,0,"exports"],[15,31,87,0],[16,4,87,0,"enumerable"],[16,14,87,0],[17,4,87,0,"get"],[17,7,87,0],[17,18,87,0,"get"],[17,19,87,0],[18,6,87,0],[18,13,87,0,"_default"],[18,21,87,0],[19,4,87,0],[20,2,87,0],[21,2,12,0,"Object"],[21,8,12,0],[21,9,12,0,"defineProperty"],[21,23,12,0],[21,24,12,0,"exports"],[21,31,12,0],[22,4,12,0,"enumerable"],[22,14,12,0],[23,4,12,0,"get"],[23,7,12,0],[23,18,12,0,"get"],[23,19,12,0],[24,6,12,0],[24,13,12,0,"bundleKeys"],[24,23,12,0],[25,4,12,0],[26,2,12,0],[27,2,29,0,"exports"],[27,9,29,0],[27,10,29,0,"useBundleOffersQuery"],[27,30,29,0],[27,33,29,0,"useBundleOffersQuery"],[27,53,29,0],[28,2,45,0,"exports"],[28,9,45,0],[28,10,45,0,"useBundleProducts"],[28,27,45,0],[28,30,45,0,"useBundleProducts"],[28,47,45,0],[29,2,7,0],[29,6,7,0,"_react"],[29,12,7,0],[29,15,7,0,"require"],[29,22,7,0],[29,23,7,0,"_dependencyMap"],[29,37,7,0],[30,2,8,0],[30,6,8,0,"_tanstackReactQuery"],[30,25,8,0],[30,28,8,0,"require"],[30,35,8,0],[30,36,8,0,"_dependencyMap"],[30,50,8,0],[31,2,9,0],[31,6,9,0,"_servicesApi"],[31,18,9,0],[31,21,9,0,"require"],[31,28,9,0],[31,29,9,0,"_dependencyMap"],[31,43,9,0],[32,2,11,0],[33,2,12,7],[33,8,12,13,"bundleKeys"],[33,18,12,23],[33,21,12,26],[34,4,13,2,"all"],[34,7,13,5],[34,9,13,7],[34,10,13,8],[34,24,13,22],[34,25,13,32],[35,4,14,2,"active"],[35,10,14,8],[35,12,14,10],[35,13,14,11],[35,27,14,25],[35,29,14,27],[35,37,14,35],[36,2,15,0],[36,3,15,1],[37,2,26,0],[38,0,27,0],[39,0,28,0],[40,2,29,7],[40,11,29,16,"useBundleOffersQuery"],[40,31,29,36,"useBundleOffersQuery"],[40,32,29,37,"enabled"],[40,39,29,44],[40,42,29,47],[40,46,29,51],[40,48,29,53],[41,4,29,53,"_s"],[41,6,29,53],[42,4,30,2],[42,11,30,9],[42,15,30,9,"useQuery"],[42,34,30,17],[42,35,30,17,"useQuery"],[42,43,30,17],[42,45,30,18],[43,6,31,4,"queryKey"],[43,14,31,12],[43,16,31,14,"bundleKeys"],[43,26,31,24],[43,27,31,25,"active"],[43,33,31,31],[44,6,32,4,"queryFn"],[44,13,32,11],[44,15,32,13],[44,21,32,13,"queryFn"],[44,22,32,13],[44,27,32,25],[45,8,33,6],[45,14,33,12,"response"],[45,22,33,20],[45,25,33,23],[45,31,33,29,"bundleOfferApi"],[45,43,33,43],[45,44,33,43,"bundleOfferApi"],[45,58,33,43],[45,59,33,44,"getAll"],[45,65,33,50],[45,66,33,51],[45,70,33,55],[45,71,33,56],[45,72,33,57],[45,73,33,58],[46,8,34,6],[46,15,34,14,"response"],[46,23,34,22],[46,24,34,23,"data"],[46,28,34,27],[46,32,34,31],[46,34,34,33],[47,6,35,4],[47,7,35,5],[48,6,36,4,"enabled"],[48,13,36,11],[49,6,37,4,"staleTime"],[49,15,37,13],[49,17,37,15],[49,18,37,16],[49,21,37,19],[49,23,37,21],[49,26,37,24],[49,30,37,28],[49,31,37,30],[50,4,38,2],[50,5,38,3],[50,6,38,4],[51,2,39,0],[53,2,41,0],[54,0,42,0],[55,0,43,0],[56,0,44,0],[57,2,41,0,"_s"],[57,4,41,0],[57,5,29,16,"useBundleOffersQuery"],[57,25,29,36],[58,4,29,36],[58,12,30,9,"useQuery"],[58,31,30,17],[58,32,30,17,"useQuery"],[58,40,30,17],[59,2,30,17],[60,2,45,7],[60,11,45,16,"useBundleProducts"],[60,28,45,33,"useBundleProducts"],[60,29,45,33],[60,31,45,36],[61,4,45,36,"_s2"],[61,7,45,36],[62,4,46,2],[62,10,46,8],[63,6,46,10,"data"],[63,10,46,14],[63,12,46,16,"bundleOffers"],[63,24,46,28],[63,27,46,31],[63,29,46,33],[64,6,46,35,"isLoading"],[64,15,46,44],[65,6,46,46,"isError"],[66,4,46,54],[66,5,46,55],[66,8,46,58,"useBundleOffersQuery"],[66,28,46,78],[66,29,46,79],[66,30,46,80],[68,4,48,2],[69,4,49,2],[69,10,49,8,"bundleProductIds"],[69,26,49,24],[69,29,49,27],[69,33,49,27,"useMemo"],[69,39,49,34],[69,40,49,34,"useMemo"],[69,47,49,34],[69,49,49,35],[69,55,49,41],[70,6,50,4],[70,12,50,10,"productSet"],[70,22,50,20],[70,25,50,23],[70,29,50,27,"Set"],[70,32,50,30],[70,33,50,39],[70,34,50,40],[71,6,52,4,"bundleOffers"],[71,18,52,16],[71,19,52,17,"forEach"],[71,26,52,24],[71,27,52,26,"bundle"],[71,33,52,45],[71,37,52,50],[72,8,53,6],[72,12,53,10,"bundle"],[72,18,53,16],[72,19,53,17,"is_active"],[72,28,53,26],[72,32,53,30,"Array"],[72,37,53,35],[72,38,53,36,"isArray"],[72,45,53,43],[72,46,53,44,"bundle"],[72,52,53,50],[72,53,53,51,"product_ids"],[72,64,53,62],[72,65,53,63],[72,67,53,65],[73,10,54,8,"bundle"],[73,16,54,14],[73,17,54,15,"product_ids"],[73,28,54,26],[73,29,54,27,"forEach"],[73,36,54,34],[73,37,54,36,"productId"],[73,46,54,53],[73,50,54,58],[74,12,55,10,"productSet"],[74,22,55,20],[74,23,55,21,"add"],[74,26,55,24],[74,27,55,25,"productId"],[74,36,55,34],[74,37,55,35],[75,10,56,8],[75,11,56,9],[75,12,56,10],[76,8,57,6],[77,6,58,4],[77,7,58,5],[77,8,58,6],[78,6,60,4],[78,13,60,11,"productSet"],[78,23,60,21],[79,4,61,2],[79,5,61,3],[79,7,61,5],[79,8,61,6,"bundleOffers"],[79,20,61,18],[79,21,61,19],[79,22,61,20],[81,4,63,2],[82,4,64,2],[82,10,64,8,"isProductInBundle"],[82,27,64,25],[82,30,64,29,"productId"],[82,39,64,46],[82,43,64,60],[83,6,65,4],[83,13,65,11,"bundleProductIds"],[83,29,65,27],[83,30,65,28,"has"],[83,33,65,31],[83,34,65,32,"productId"],[83,43,65,41],[83,44,65,42],[84,4,66,2],[84,5,66,3],[86,4,68,2],[87,4,69,2],[87,10,69,8,"getBundleForProduct"],[87,29,69,27],[87,32,69,31,"productId"],[87,41,69,48],[87,45,69,78],[88,6,70,4],[88,13,70,11,"bundleOffers"],[88,25,70,23],[88,26,70,24,"find"],[88,30,70,28],[88,31,70,30,"bundle"],[88,37,70,49],[88,41,71,6,"bundle"],[88,47,71,12],[88,48,71,13,"is_active"],[88,57,71,22],[88,61,72,6,"Array"],[88,66,72,11],[88,67,72,12,"isArray"],[88,74,72,19],[88,75,72,20,"bundle"],[88,81,72,26],[88,82,72,27,"product_ids"],[88,93,72,38],[88,94,72,39],[88,98,73,6,"bundle"],[88,104,73,12],[88,105,73,13,"product_ids"],[88,116,73,24],[88,117,73,25,"includes"],[88,125,73,33],[88,126,73,34,"productId"],[88,135,73,43],[88,136,74,4],[88,137,74,5],[89,4,75,2],[89,5,75,3],[90,4,77,2],[90,11,77,9],[91,6,78,4,"bundleProductIds"],[91,22,78,20],[92,6,79,4,"bundleOffers"],[92,18,79,16],[93,6,80,4,"isProductInBundle"],[93,23,80,21],[94,6,81,4,"getBundleForProduct"],[94,25,81,23],[95,6,82,4,"isLoading"],[95,15,82,13],[96,6,83,4,"isError"],[97,4,84,2],[97,5,84,3],[98,2,85,0],[99,2,85,1,"_s2"],[99,5,85,1],[99,6,45,16,"useBundleProducts"],[99,23,45,33],[100,4,45,33],[100,12,46,58,"useBundleOffersQuery"],[100,32,46,78],[101,2,46,78],[102,2,87,0],[102,6,87,0,"_default"],[102,14,87,0],[102,17,87,15,"useBundleProducts"],[102,34,87,32],[103,0,87,33],[103,3]],"functionMap":{"names":["<global>","useBundleOffersQuery","useQuery$argument_0.queryFn","useBundleProducts","useMemo$argument_0","bundleOffers.forEach$argument_0","bundle.product_ids.forEach$argument_0","isProductInBundle","getBundleForProduct","bundleOffers.find$argument_0"],"mappings":"AAA;OC4B;aCG;KDG;CDI;OGM;mCCI;yBCG;mCCE;SDE;KDE;GDG;4BIG;GJE;8BKG;6BCC;4CDG;GLE;CHU"},"hasCjsExports":false},"type":"js/module"}]}