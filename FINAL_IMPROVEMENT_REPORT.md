# ğŸ“‹ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„ ÙˆØ§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

## ğŸ¯ Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ

Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„ØªØ·Ø¨ÙŠÙ‚ "Ø§Ù„ØºØ²Ø§Ù„ÙŠ Ù„Ù‚Ø·Ø¹ ØºÙŠØ§Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª" Ù…Ø¹ Ø®Ø·Ø© ØªÙ†ÙÙŠØ°ÙŠØ© Ù„Ø¶Ù…Ø§Ù†:
- âœ… Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
- âœ… Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ/Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
- âœ… Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ù‰ Ø§Ù„Ø·ÙˆÙŠÙ„
- âœ… Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹ Ù…Ø¹ Ù†Ù…Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø² Ø­ØªÙ‰ Ù…Ø¹ Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª

---

## ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

### Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ© âœ…
1. **ØªÙ‚Ù†ÙŠØ§Øª Ø­Ø¯ÙŠØ«Ø©**: React Native + Expo + FastAPI + MongoDB
2. **Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø©**: Zustand Ù…Ø¹ AsyncStorage Ù„Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
3. **Ù†Ø¸Ø§Ù… Ù…Ø²Ø§Ù…Ù†Ø©**: SyncService Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
4. **WebSocket**: Ø¯Ø¹Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
5. **ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨**: Ø¯Ø¹Ù… RTL ÙˆØ§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
6. **ØªØ®Ø²ÙŠÙ† Ø§Ù„ØµÙˆØ±**: expo-image Ù…Ø¹ disk caching

### Ù†Ù‚Ø§Ø· ØªØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ† âš ï¸
1. **Ù…Ù„Ù server.py**: 3142 Ø³Ø·Ø± - ÙŠØ­ØªØ§Ø¬ ØªÙ‚Ø³ÙŠÙ…
2. **Ù…Ù„Ù appStore.ts**: 665 Ø³Ø·Ø± - ÙŠØ­ØªØ§Ø¬ ØªÙ‚Ø³ÙŠÙ…
3. **Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Pagination**: Ù‚Ø¯ ÙŠØ³Ø¨Ø¨ Ø¨Ø·Ø¡ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©
4. **Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Error Boundaries**: Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù‚Ø¯ ÙŠØªÙˆÙ‚Ù Ù…Ø¹ Ø£ÙŠ Ø®Ø·Ø£
5. **ØºÙŠØ§Ø¨ Rate Limiting**: Ù‚Ø¯ ÙŠØªØ¹Ø±Ø¶ Ù„Ù„Ù€ abuse
6. **Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù†Ø¸Ø§Ù… Logging Ù…ØªÙ‚Ø¯Ù…**: ØµØ¹ÙˆØ¨Ø© Ø§Ù„ØªØ´Ø®ÙŠØµ

---

## ğŸš€ Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: ØªØ­Ø³ÙŠÙ† Ø¨Ù†ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰) â±ï¸ 45 Ø¯Ù‚ÙŠÙ‚Ø©

#### 1.1 ØªÙ‚Ø³ÙŠÙ… Backend (server.py)

**Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:**
```
/app/backend/
â”œâ”€â”€ server.py (main entry - 200 lines max)
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth.py
â”‚   â”œâ”€â”€ products.py
â”‚   â”œâ”€â”€ car_brands.py
â”‚   â”œâ”€â”€ car_models.py
â”‚   â”œâ”€â”€ categories.py
â”‚   â”œâ”€â”€ orders.py
â”‚   â”œâ”€â”€ marketing.py
â”‚   â””â”€â”€ admin.py
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ schemas.py
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ database.py
â”‚   â””â”€â”€ websocket.py
â””â”€â”€ utils/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ helpers.py
```

**Ø§Ù„ÙØ§Ø¦Ø¯Ø©:**
- Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©
- Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø¨Ø³Ø±Ø¹Ø©

#### 1.2 ØªÙ‚Ø³ÙŠÙ… Frontend Store

**Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:**
```
/app/frontend/src/store/
â”œâ”€â”€ index.ts (re-exports)
â”œâ”€â”€ authStore.ts (user, session, login/logout)
â”œâ”€â”€ cartStore.ts (cart items, bundle logic)
â”œâ”€â”€ uiStore.ts (theme, language, RTL)
â”œâ”€â”€ dataStore.ts (cached data: brands, models, products)
â”œâ”€â”€ syncStore.ts (sync status, offline queue)
â””â”€â”€ notificationStore.ts (notifications)
```

**Ø§Ù„ÙØ§Ø¦Ø¯Ø©:**
- ØªÙ‚Ù„ÙŠÙ„ Ø­Ø¬Ù… ÙƒÙ„ store
- selectors Ø£Ø³Ø±Ø¹
- Ø¹Ø²Ù„ Ø§Ù„Ù…Ù†Ø·Ù‚

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ù†Ø¸Ø§Ù… Pagination Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰) â±ï¸ 30 Ø¯Ù‚ÙŠÙ‚Ø©

#### 2.1 Backend - Ø¥Ø¶Ø§ÙØ© Pagination Cursor-based

```python
# ÙÙŠ routes/products.py
@router.get("/products")
async def get_products(
    cursor: Optional[str] = None,
    limit: int = Query(default=20, le=100),
    category_id: Optional[str] = None,
    car_model_id: Optional[str] = None,
    search: Optional[str] = None,
):
    """
    Cursor-based pagination Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø£Ù…Ø«Ù„
    """
    query = {}
    if cursor:
        query["_id"] = {"$gt": ObjectId(cursor)}
    if category_id:
        query["category_id"] = category_id
    
    products = await db.products.find(query).limit(limit + 1).to_list(limit + 1)
    
    has_more = len(products) > limit
    if has_more:
        products = products[:-1]
    
    next_cursor = str(products[-1]["_id"]) if has_more and products else None
    
    return {
        "products": products,
        "next_cursor": next_cursor,
        "has_more": has_more
    }
```

#### 2.2 Frontend - Infinite Scroll

```tsx
// ÙÙŠ ProductList.tsx
const useInfiniteProducts = () => {
  const [products, setProducts] = useState<Product[]>([]);
  const [cursor, setCursor] = useState<string | null>(null);
  const [hasMore, setHasMore] = useState(true);
  const [loading, setLoading] = useState(false);

  const loadMore = useCallback(async () => {
    if (loading || !hasMore) return;
    setLoading(true);
    
    const response = await productsApi.getAll({ cursor, limit: 20 });
    setProducts(prev => [...prev, ...response.data.products]);
    setCursor(response.data.next_cursor);
    setHasMore(response.data.has_more);
    setLoading(false);
  }, [cursor, hasMore, loading]);

  return { products, loadMore, hasMore, loading };
};
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Error Boundaries Ùˆ Error Handling (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©) â±ï¸ 20 Ø¯Ù‚ÙŠÙ‚Ø©

#### 3.1 Ø¥Ù†Ø´Ø§Ø¡ Global Error Boundary

```tsx
// src/components/ErrorBoundary.tsx
import React, { Component, ErrorInfo, ReactNode } from 'react';
import { View, Text, TouchableOpacity, StyleSheet } from 'react-native';
import { Ionicons } from '@expo/vector-icons';

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
}

export class ErrorBoundary extends Component<Props, State> {
  state: State = { hasError: false, error: null };

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    // Log to error tracking service
    console.error('ErrorBoundary caught:', error, errorInfo);
  }

  handleReset = () => {
    this.setState({ hasError: false, error: null });
  };

  render() {
    if (this.state.hasError) {
      return this.props.fallback || (
        <View style={styles.container}>
          <Ionicons name="alert-circle" size={64} color="#EF4444" />
          <Text style={styles.title}>Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹</Text>
          <Text style={styles.message}>{this.state.error?.message}</Text>
          <TouchableOpacity style={styles.button} onPress={this.handleReset}>
            <Text style={styles.buttonText}>Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</Text>
          </TouchableOpacity>
        </View>
      );
    }
    return this.props.children;
  }
}
```

#### 3.2 ØªØ·Ø¨ÙŠÙ‚ Error Boundaries Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```tsx
// ÙÙŠ _layout.tsx
<ErrorBoundary>
  <Stack screenOptions={{ headerShown: false }}>
    <Stack.Screen name="(tabs)" />
  </Stack>
</ErrorBoundary>
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ù†Ø¸Ø§Ù… Caching Ù…ØªÙ‚Ø¯Ù… (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©) â±ï¸ 25 Ø¯Ù‚ÙŠÙ‚Ø©

#### 4.1 Backend - Redis Caching (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø£Ùˆ Memory Cache

```python
# ÙÙŠ services/cache.py
from functools import lru_cache
from datetime import datetime, timedelta
import asyncio

class MemoryCache:
    def __init__(self):
        self._cache: Dict[str, tuple] = {}
        self._lock = asyncio.Lock()
    
    async def get(self, key: str):
        async with self._lock:
            if key in self._cache:
                value, expires_at = self._cache[key]
                if datetime.now() < expires_at:
                    return value
                del self._cache[key]
        return None
    
    async def set(self, key: str, value: Any, ttl_seconds: int = 300):
        async with self._lock:
            expires_at = datetime.now() + timedelta(seconds=ttl_seconds)
            self._cache[key] = (value, expires_at)
    
    async def invalidate(self, pattern: str):
        async with self._lock:
            keys_to_delete = [k for k in self._cache if pattern in k]
            for k in keys_to_delete:
                del self._cache[k]

cache = MemoryCache()

# Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø§Ù„Ù€ routes
@router.get("/products")
async def get_products():
    cache_key = "products:all"
    cached = await cache.get(cache_key)
    if cached:
        return cached
    
    products = await db.products.find().to_list(1000)
    await cache.set(cache_key, products, ttl_seconds=60)
    return products
```

#### 4.2 Frontend - Query Caching with Stale-While-Revalidate

```tsx
// ÙÙŠ hooks/useQueryCache.ts
const useQueryCache = <T>(
  key: string,
  fetcher: () => Promise<T>,
  options: { staleTime?: number; cacheTime?: number } = {}
) => {
  const { staleTime = 5 * 60 * 1000, cacheTime = 30 * 60 * 1000 } = options;
  const [data, setData] = useState<T | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);
  
  // Check cache on mount
  useEffect(() => {
    const cached = queryCache.get(key);
    if (cached && !cached.isStale) {
      setData(cached.data);
      setLoading(false);
    }
    
    // Fetch fresh data
    fetcher()
      .then(freshData => {
        setData(freshData);
        queryCache.set(key, freshData, staleTime);
      })
      .catch(setError)
      .finally(() => setLoading(false));
  }, [key]);
  
  return { data, loading, error };
};
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UX) (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù…ØªÙˆØ³Ø·Ø©) â±ï¸ 30 Ø¯Ù‚ÙŠÙ‚Ø©

#### 5.1 Skeleton Loading Ù„Ù„Ø´Ø§Ø´Ø§Øª

```tsx
// ØªØ­Ø³ÙŠÙ† Skeleton.tsx
export const ProductGridSkeleton = () => (
  <View style={styles.grid}>
    {[1, 2, 3, 4, 5, 6].map(i => (
      <ProductCardSkeleton key={i} />
    ))}
  </View>
);

export const HomeScreenSkeleton = () => (
  <View>
    <SliderSkeleton />
    <CategoryGridSkeleton />
    <ProductGridSkeleton />
  </View>
);
```

#### 5.2 Pull-to-Refresh ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…

```tsx
// Ø¥Ø¶Ø§ÙØ© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª
<ScrollView
  refreshControl={
    <RefreshControl
      refreshing={refreshing}
      onRefresh={handleRefresh}
      colors={[colors.primary]}
      tintColor={colors.primary}
    />
  }
>
  {/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */}
</ScrollView>
```

#### 5.3 Empty States Ù…Ø­Ø³Ù‘Ù†Ø©

```tsx
// src/components/EmptyState.tsx
export const EmptyState: React.FC<{
  icon: string;
  title: string;
  subtitle?: string;
  action?: { label: string; onPress: () => void };
}> = ({ icon, title, subtitle, action }) => (
  <View style={styles.container}>
    <Ionicons name={icon} size={80} color={colors.textSecondary} />
    <Text style={styles.title}>{title}</Text>
    {subtitle && <Text style={styles.subtitle}>{subtitle}</Text>}
    {action && (
      <TouchableOpacity style={styles.button} onPress={action.onPress}>
        <Text style={styles.buttonText}>{action.label}</Text>
      </TouchableOpacity>
    )}
  </View>
);
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù…ØªÙˆØ³Ø·Ø©) â±ï¸ 20 Ø¯Ù‚ÙŠÙ‚Ø©

#### 6.1 Rate Limiting ÙÙŠ Backend

```python
# ÙÙŠ middleware/rate_limit.py
from collections import defaultdict
from datetime import datetime, timedelta
from fastapi import Request, HTTPException

class RateLimiter:
    def __init__(self, requests_per_minute: int = 60):
        self.requests = defaultdict(list)
        self.limit = requests_per_minute
    
    async def check(self, request: Request):
        client_ip = request.client.host
        now = datetime.now()
        minute_ago = now - timedelta(minutes=1)
        
        # Clean old requests
        self.requests[client_ip] = [
            t for t in self.requests[client_ip] if t > minute_ago
        ]
        
        if len(self.requests[client_ip]) >= self.limit:
            raise HTTPException(429, "Too Many Requests")
        
        self.requests[client_ip].append(now)

rate_limiter = RateLimiter()

# ÙÙŠ main app
@app.middleware("http")
async def rate_limit_middleware(request: Request, call_next):
    await rate_limiter.check(request)
    return await call_next(request)
```

#### 6.2 Input Validation Ù…Ø­Ø³Ù‘Ù†

```python
# ÙÙŠ models/schemas.py
from pydantic import BaseModel, validator, Field
import re

class ProductCreate(BaseModel):
    name: str = Field(..., min_length=2, max_length=200)
    name_ar: str = Field(..., min_length=2, max_length=200)
    price: float = Field(..., gt=0, le=1000000)
    sku: str = Field(..., min_length=3, max_length=50)
    
    @validator('sku')
    def validate_sku(cls, v):
        if not re.match(r'^[A-Za-z0-9-_]+$', v):
            raise ValueError('SKU must be alphanumeric')
        return v.upper()
    
    @validator('price')
    def round_price(cls, v):
        return round(v, 2)
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: Ù†Ø¸Ø§Ù… Logging Ùˆ Monitoring (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù…Ù†Ø®ÙØ¶Ø©) â±ï¸ 15 Ø¯Ù‚ÙŠÙ‚Ø©

#### 7.1 Structured Logging

```python
# ÙÙŠ utils/logger.py
import logging
import json
from datetime import datetime

class JSONFormatter(logging.Formatter):
    def format(self, record):
        log_data = {
            "timestamp": datetime.utcnow().isoformat(),
            "level": record.levelname,
            "message": record.getMessage(),
            "module": record.module,
            "function": record.funcName,
        }
        if hasattr(record, 'extra'):
            log_data.update(record.extra)
        return json.dumps(log_data)

# Ø¥Ø¹Ø¯Ø§Ø¯ Logger
def setup_logging():
    logger = logging.getLogger("app")
    handler = logging.StreamHandler()
    handler.setFormatter(JSONFormatter())
    logger.addHandler(handler)
    logger.setLevel(logging.INFO)
    return logger

logger = setup_logging()

# Ø§Ø³ØªØ®Ø¯Ø§Ù…
logger.info("Product created", extra={
    "product_id": product_id,
    "user_id": user_id,
    "action": "create_product"
})
```

#### 7.2 Performance Monitoring

```python
# ÙÙŠ middleware/monitoring.py
import time
from fastapi import Request

@app.middleware("http")
async def performance_middleware(request: Request, call_next):
    start_time = time.time()
    response = await call_next(request)
    process_time = time.time() - start_time
    
    # Log slow requests
    if process_time > 1.0:  # > 1 second
        logger.warning("Slow request", extra={
            "path": request.url.path,
            "method": request.method,
            "process_time": process_time
        })
    
    response.headers["X-Process-Time"] = str(process_time)
    return response
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8: ØªØ­Ø³ÙŠÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù…Ù†Ø®ÙØ¶Ø©) â±ï¸ 15 Ø¯Ù‚ÙŠÙ‚Ø©

#### 8.1 Compound Indexes Ø¥Ø¶Ø§ÙÙŠØ©

```python
# ÙÙŠ startup event
async def create_indexes():
    # Compound indexes for common queries
    await db.products.create_index([
        ("category_id", 1),
        ("price", 1)
    ], name="category_price_idx")
    
    await db.products.create_index([
        ("product_brand_id", 1),
        ("created_at", -1)
    ], name="brand_date_idx")
    
    await db.orders.create_index([
        ("user_id", 1),
        ("status", 1),
        ("created_at", -1)
    ], name="user_orders_idx")
    
    # Text index for search
    await db.products.create_index([
        ("name", "text"),
        ("name_ar", "text"),
        ("sku", "text")
    ], name="product_search_idx")
```

#### 8.2 Database Cleanup Job

```python
# ÙÙŠ services/cleanup.py
async def cleanup_old_sessions():
    """Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©"""
    thirty_days_ago = datetime.utcnow() - timedelta(days=30)
    result = await db.sessions.delete_many({
        "created_at": {"$lt": thirty_days_ago}
    })
    logger.info(f"Cleaned up {result.deleted_count} old sessions")

async def cleanup_temp_carts():
    """Ø­Ø°Ù Ø§Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØºÙŠØ± Ù…Ø³Ø¬Ù„ÙŠÙ†"""
    seven_days_ago = datetime.utcnow() - timedelta(days=7)
    result = await db.carts.delete_many({
        "user_id": {"$regex": "^guest_"},
        "updated_at": {"$lt": seven_days_ago}
    })
    logger.info(f"Cleaned up {result.deleted_count} temp carts")
```

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ†ÙÙŠØ°

| Ø§Ù„Ù…Ø±Ø­Ù„Ø© | Ø§Ù„ÙˆØµÙ | Ø§Ù„ÙˆÙ‚Øª | Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© | Ø§Ù„ØªØ£Ø«ÙŠØ± |
|---------|-------|-------|----------|---------|
| **1** | ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙƒÙˆØ¯ (Backend + Frontend) | 45 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸ”´ Ù‚ØµÙˆÙ‰ | ØµÙŠØ§Ù†Ø© Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰ |
| **2** | Ù†Ø¸Ø§Ù… Pagination | 30 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸ”´ Ù‚ØµÙˆÙ‰ | Ø£Ø¯Ø§Ø¡ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ¨ÙŠØ±Ø© |
| **3** | Error Boundaries | 20 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸŸ  Ø¹Ø§Ù„ÙŠØ© | Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ |
| **4** | Ù†Ø¸Ø§Ù… Caching | 25 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸŸ  Ø¹Ø§Ù„ÙŠØ© | Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ |
| **5** | ØªØ­Ø³ÙŠÙ† UX | 30 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø© | ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| **6** | ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† | 20 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø© | Ø­Ù…Ø§ÙŠØ© API |
| **7** | Logging & Monitoring | 15 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸŸ¢ Ù…Ù†Ø®ÙØ¶Ø© | ØªØ´Ø®ÙŠØµ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ |
| **8** | ØªØ­Ø³ÙŠÙ† Database | 15 Ø¯Ù‚ÙŠÙ‚Ø© | ğŸŸ¢ Ù…Ù†Ø®ÙØ¶Ø© | Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª |

**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‚Ø¯Ø±:** ~3.5 Ø³Ø§Ø¹Ø©

---

## ğŸ¯ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

### Ù„Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙÙˆØ±ÙŠ (Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©):
1. âœ… **Error Boundaries** - Ù…Ù†Ø¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù† Ø§Ù„ØªÙˆÙ‚Ù
2. âœ… **Pagination Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª** - Ø¶Ø±ÙˆØ±ÙŠ Ù…Ø¹ Ù†Ù…Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
3. âœ… **Empty States Ù…Ø­Ø³Ù‘Ù†Ø©** - ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø£ÙØ¶Ù„

### Ù„Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:
1. ğŸ“¦ ØªÙ‚Ø³ÙŠÙ… server.py Ø¥Ù„Ù‰ modules
2. ğŸ“¦ ØªÙ‚Ø³ÙŠÙ… appStore.ts Ø¥Ù„Ù‰ stores Ù…Ù†ÙØµÙ„Ø©
3. ğŸ“¦ Ø¥Ø¶Ø§ÙØ© Rate Limiting
4. ğŸ“¦ Ù†Ø¸Ø§Ù… Caching Ù…ØªÙ‚Ø¯Ù…

### Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø¨Ø¹ÙŠØ¯:
1. ğŸ”® Redis Ù„Ù„Ù€ caching Ø§Ù„Ù…ÙˆØ²Ø¹
2. ğŸ”® Ù†Ø¸Ø§Ù… Notifications Ù…ØªÙ‚Ø¯Ù…
3. ğŸ”® Analytics Dashboard
4. ğŸ”® A/B Testing Ù„Ù„Ù…ÙŠØ²Ø§Øª

---

## ğŸ“ˆ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ø­Ø§Ù„ÙŠ | Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ |
|---------|--------|---------|
| ÙˆÙ‚Øª ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© | ~2-3s | <1s |
| FPS Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠØ± | ~45-50 | 58-60 |
| Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ | ~95% | 99.5%+ |
| Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹ | ~5000 Ù…Ù†ØªØ¬ | 100,000+ Ù…Ù†ØªØ¬ |
| ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ù€ API | ~200-500ms | <100ms |

---

*ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ: ÙŠÙ†Ø§ÙŠØ± 2025*
*Ø§Ù„Ø¥ØµØ¯Ø§Ø±: 1.0*
